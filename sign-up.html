<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign Up — BlackBox</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&display=swap" rel="stylesheet">
  
  <style>
    * {
      font-family: 'Orbitron', sans-serif;
    }
    body {
      margin: 0;
      min-height: 100vh;
      background: radial-gradient(black, #050505);
      overflow-x: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      perspective: 800px;
      padding: 20px 0;
    }
    .background-grid {
      position: fixed;
      width: 100%;
      height: 100%;
      background-image: linear-gradient(white 1px, transparent 1px),
        linear-gradient(90deg, white 1px, transparent 1px);
      background-size: 80px 80px;
      opacity: 0.05;
      z-index: 0;
    }
    .main-container {
      position: relative;
      z-index: 2;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 80px;
      width: 100%;
      max-width: 400px;
      margin-top: -180px;
    }
    .profile-card {
      background: rgba(15, 17, 19, 0.95);
      border: 1px solid #00ff7f44;
      border-radius: 18px;
      padding: 32px 20px;
      width: 200px;
      max-width: 70vw;
      box-shadow: 0 0 32px #00ff7f22;
      opacity: 0;
      transform: translateY(-20px);
      transition: all 0.5s cubic-bezier(.4,0,.2,1);
      transform-style: preserve-3d;
      animation: cardFloat 6s ease-in-out infinite;
      position: relative;
      z-index: 2;
      margin-top:45%;
    }
    .hologram-base {
      position: absolute;
      bottom: -130px;
      left: 50%;
      transform: translateX(-50%);
      width: 120px;
      height: 40px;
      z-index: 1;
      transform-style: preserve-3d;
    }
    .hologram-base::before {
      content: '';
      position: absolute;
      width: 120px;
      height: 120px;
      background: radial-gradient(circle, rgba(0, 255, 127, 0.3) 0%, rgba(0, 255, 127, 0.1) 50%, transparent 70%);
      border: 1px solid rgba(0, 255, 127, 0.3);
      box-shadow: 0 0 30px rgba(0, 255, 127, 0.4), inset 0 0 20px rgba(0, 255, 127, 0.2);
      transform: rotateX(90deg) translateZ(-60px);
      animation: baseGlow 3s ease-in-out infinite;
    }
    .hologram-base::after {
      content: '';
      position: absolute;
      width: 120px;
      height: 40px;
      background: linear-gradient(180deg, rgba(0, 255, 127, 0.2) 0%, rgba(0, 255, 127, 0.05) 100%);
      border-left: 1px solid rgba(0, 255, 127, 0.3);
      border-right: 1px solid rgba(0, 255, 127, 0.3);
      border-bottom: 1px solid rgba(0, 255, 127, 0.3);
      box-shadow: 0 0 20px rgba(0, 255, 127, 0.3);
      transform: translateZ(0);
    }
    .box-side-left,
    .box-side-right,
    .box-side-back {
      position: absolute;
      background: linear-gradient(180deg, rgba(0, 255, 127, 0.15) 0%, rgba(0, 255, 127, 0.05) 100%);
      border: 1px solid rgba(0, 255, 127, 0.3);
      box-shadow: inset 0 0 15px rgba(0, 255, 127, 0.1);
    }
    .box-side-left {
      width: 120px;
      height: 40px;
      transform: rotateY(90deg) translateZ(-60px);
    }
    .box-side-right {
      width: 120px;
      height: 40px;
      transform: rotateY(-90deg) translateZ(-60px);
    }
    .box-side-back {
      width: 120px;
      height: 40px;
      transform: translateZ(-120px);
      background: linear-gradient(180deg, rgba(0, 255, 127, 0.2) 0%, rgba(0, 255, 127, 0.08) 100%);
    }
    .hologram-rays {
      position: absolute;
      bottom: -60px;
      left: 50%;
      transform: translateX(-50%);
      width: 200px;
      height: 300px;
      pointer-events: none;
      z-index: 0;
      display: none;
    }
    @keyframes baseGlow {
      0%, 100% {
        box-shadow: 0 0 40px rgba(0, 255, 127, 0.4), inset 0 0 20px rgba(0, 255, 127, 0.2);
      }
      50% {
        box-shadow: 0 0 60px rgba(0, 255, 127, 0.6), inset 0 0 30px rgba(0, 255, 127, 0.3);
      }
    }
    .profile-card.visible {
      opacity: 1;
      transform: translateY(0);
    }
    @keyframes cardFloat {
      0%, 100% {
        transform: translateX(0) rotateY(-15deg) rotateX(3deg);
      }
      25% {
        transform: translateX(10px) rotateY(15deg) rotateX(-3deg);
      }
      50% {
        transform: translateX(0) rotateY(-15deg) rotateX(3deg);
      }
      75% {
        transform: translateX(-10px) rotateY(15deg) rotateX(-3deg);
      }
    }
    .profile-header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 20px;
    }
    .profile-image {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      border: 2px solid #00ff7f;
      box-shadow: 0 0 20px #00ff7f44;
      object-fit: cover;
      background: #0f1113;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3rem;
    
    }
    .profile-info {
      flex: 1;
    }
    .profile-nickname {
      font-size: 1.2rem;
      color: #00ff7f;
      margin: 0 0 4px 0;
      text-shadow: 0 0 8px #00ff7f44;
    }
    .profile-email {
      font-size: 0.7rem;
      color: #9ad3ff;
      margin: 0;
      opacity: 0.8;
    }
    .profile-detail {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 12px;
      padding: 8px 12px;
      background: rgba(0, 255, 127, 0.05);
      border-radius: 8px;
      border: 1px solid #00ff7f22;
    }
    .profile-label {
      font-size: 0.65rem;
      color: #00ff7f;
      opacity: 0.7;
    }
    .profile-value {
      font-size: 0.7rem;
      color: white;
      flex: 1;
      text-align: right;
    }
    .ai-interview-container {
      border-radius: 18px;
      box-shadow: 0 0 32px #00ff7f22;
      padding: 36px 24px 24px 24px;
      width: 340px;
      max-width: 90vw;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      justify-content: center;
      margin-top:40%;
    }
    .ai-chat-row {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      width: 100%;
      margin-bottom: 18px;
    }
    .ai-logo {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      box-shadow: 0 0 16px #00ff7f44;
      background: #0f1113;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      flex-shrink: 0;
      border: 1px solid white;
    }
    .ai-question {
      font-size: 0.7rem;
      color: white;
      text-align: left;
      min-height: 38px;
      letter-spacing: 1px;
      text-shadow: 0 0 8px #00ff7f22;
      background: rgba(15, 17, 19, 0.98);
      border-radius: 12px;
      padding: 12px 18px;
      box-shadow: 0 0 8px #00ff7f22;
      max-width: 320px;
      display: inline-block;
    }
    .input-frame {
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: all 0.3s cubic-bezier(.4,0,.2,1);
    }
    .ai-input {
      flex: 1;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #00ff7f44;
      background: #0f1113;
      color: #00ff7f;
      font-size: 1em;
      outline: none;
      transition: border 0.2s;
      font-family: inherit;
    }
    .ai-input[type="password"] {
      letter-spacing: 2px;
    }
    .ai-input:focus {
      border: 1.5px solid #00ff7f;
      box-shadow: 0 0 8px #00ff7f44;
    }
    .ai-btn {
      background: linear-gradient(90deg, #00ff7f 0%, #9ad3ff 100%);
      color: #0f1113;
      border: none;
      border-radius: 8px;
      padding: 10px 18px;
      font-size: 1em;
      font-weight: 700;
      letter-spacing: 2px;
      cursor: pointer;
      box-shadow: 0 0 12px #00ff7f44;
      transition: background 0.2s;
    }
    .ai-btn:hover {
      background: linear-gradient(90deg, #9ad3ff 0%, #00ff7f 100%);
      color: #00ff7f;
    }
    .image-selection {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      width: 100%;
      margin-top: 12px;
      justify-content: center;
    }
.image-option {
  width: 90px;
  height: 90px;
  border-radius:12px;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #111; /* optional */
  border: 2px solid transparent;
  transition: 0.3s ease;
  padding: 10px;
  margin:0 auto;
}

.image-option img {
  width: 100%;
  height: 100%;
  object-fit: cover; /* ensures no stretching */
  border-radius: 50%;
}
    .image-option:hover {
      border-color: #00ff7f;
      box-shadow: 0 0 16px #00ff7f44;
      transform: scale(1.05);
    }
    .image-option.selected {
      border-color: #00ff7f;
      box-shadow: 0 0 20px #00ff7f66;
      background: rgba(0, 255, 127, 0.1);
    }
    @media (max-width: 600px) {
      .profile-card, .ai-interview-container {
        width: 90vw;
        padding: 18px;
        border-radius: 10px;
      }
      .ai-question {
        font-size: 1em;
      }
      .ai-input, .ai-btn {
        font-size: 1em;
      }
    }
  </style>
</head>
<body>
  <div class="background-grid"></div>
  
  <div class="main-container">
    <div id="profileCard" class="profile-card">
      <div class="hologram-rays"></div>
      <div class="hologram-base">
        <div class="box-side-left"></div>
        <div class="box-side-right"></div>
        <div class="box-side-back"></div>
      </div>
      <div class="profile-header">
        <div class="profile-image" id="profileImage"></div>
        <div class="profile-info">
          <h2 class="profile-nickname" id="profileNickname">---</h2>
          <p class="profile-email" id="profileEmail">---</p>
        </div>
      </div>
      <div class="profile-detail">
        <span class="profile-label">PASSWORD:</span>
        <span class="profile-value" id="profilePassword">••••••••</span>
      </div>
      <div class="profile-detail">
  <span class="profile-label">GENDER:</span>
  <span class="profile-value" id="profileGender">---</span>
</div>
      <div class="profile-detail">
        <span class="profile-label">ROLE:</span>
        <span class="profile-value" id="profileRole">---</span>
      </div>
    </div>

    <div class="ai-interview-container">
      <div class="ai-chat-row">
        <div class="ai-logo" id="ai_logo">🤖</div>
        <div id="ai-question" class="ai-question"></div>
      </div>
      <div id="input-frame" class="input-frame" style="display:none;">
        <input type="text" id="userInput" class="ai-input" autocomplete="off" placeholder="Type here...">
        <button id="submitBtn" class="ai-btn">Submit</button>
      </div>
      <div id="imageSelection" class="image-selection" style="display:none;"></div>
    </div>
  </div>
  
  
  <script type="module">
    
    import { initializeApp} from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
    import {ref, set, getDatabase, push} from "https://www.gstatic.com/firebasejs/12.4.0/firebase-database.js";
    import{onAuthStateChanged, getAuth, createUserWithEmailAndPassword} from  "https://www.gstatic.com/firebasejs/12.4.0/firebase-auth.js";

    
    // Your web app's Firebase configuration
    
    const firebaseConfig = {
      apiKey: "AIzaSyBsOwXNtfaWwEh3qaM0suXafOg6CYLzDC8",
      authDomain: "uamtv-c031c.firebaseapp.com",
      databaseURL: "https://uamtv-c031c-default-rtdb.firebaseio.com",
      projectId: "uamtv-c031c",
      storageBucket: "uamtv-c031c.firebasestorage.app",
      messagingSenderId: "9790917697",
      appId: "1:9790917697:web:275c8347b7688e0ac38ac0",
      measurementId: "G-RSXW1XBVQZ"
    };
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const db =  getDatabase();

// ✅ ADD THIS TEST CODE:

console.log('🔥 Firebase initialized:', app.name);
console.log('🔐 Auth ready:', auth.app.name);
console.log('💾 Database ready:', db.app.name);
console.log('📍 Database URL:', app.options.databaseURL);


//DOM Elements




    const questions = [
      "Hello, I am BlackBox AI. Let's get you signed up.",
      "Enter your nickname:",
      "What's your email address:",
      "Set a password:",
      "Select your gender:",
      "Choose your role:",
      "Choose your profile avatar:"
    ];
    const profileGender = document.getElementById('profileGender');
    /* creating male images */
    const male1 = document.createElement("img");
    male1.src = "Assets/avatars/male/male1.png";
    male1.style.height = "inherit";
    male1.style.width = "inherit";
    male1.style.borderRadius = "inherit";
    
    const male2 = document.createElement("img");
    male2.src = "Assets/avatars/male/male2.png";
    male2.style.height = "inherit";
    male2.style.width = "inherit";
    male2.style.borderRadius = "inherit";
  
    const male3 = document.createElement("img");
    male3.src = "Assets/avatars/male/male3.png";
    male3.style.height = "inherit";
    male3.style.width = "inherit";
    male3.style.borderRadius = "inherit";
   
    const male4 = document.createElement("img");
    male4.src = "Assets/avatars/male/male4.png";
    male4.style.height = "inherit";
    male4.style.width = "inherit";
    male4.style.borderRadius = "inherit";


    const male5 = document.createElement("img");
    male5.src = "Assets/avatars/male/male5.png";
    male5.style.height = "inherit";
    male5.style.width = "inherit";
    male5.style.borderRadius = "inherit";
    
    
    const male6 = document.createElement("img");
male6.src = "Assets/avatars/male/male6.png";
male6.style.height = "inherit";
male6.style.width = "inherit";
male6.style.borderRadius = "inherit";

const male7 = document.createElement("img");
male7.src = "Assets/avatars/male/male7.png";
male7.style.height = "inherit";
male7.style.width = "inherit";
male7.style.borderRadius = "inherit";

const male8 = document.createElement("img");
male8.src = "Assets/avatars/male/male8.png";
male8.style.height = "inherit";
male8.style.width = "inherit";
male8.style.borderRadius = "inherit";



const male10 = document.createElement("img");
male10.src = "Assets/avatars/male/male10.png";
male10.style.height = "inherit";
male10.style.width = "inherit";
male10.style.borderRadius = "inherit";

const male11 = document.createElement("img");
male11.src = "Assets/avatars/male/male11.png";
male11.style.height = "inherit";
male11.style.width = "inherit";
male11.style.borderRadius = "inherit";

const male12 = document.createElement("img");
male12.src = "Assets/avatars/male/male12.png";
male12.style.height = "inherit";
male12.style.width = "inherit";
male12.style.borderRadius = "inherit";



const male14 = document.createElement("img");
male14.src = "Assets/avatars/male/male14.png";
male14.style.height = "inherit";
male14.style.width = "inherit";
male14.style.borderRadius = "inherit";
    
    /* creating female images */
    const female1 = document.createElement("img");
    female1.src = "Assets/avatars/females/female1.png";
    female1.style.height = "inherit";
    female1.style.width = "inherit";
    female1.style.borderRadius = "inherit";
    
    const female2 = document.createElement("img");
    female2.src = "Assets/avatars/females/female2.png";
    female2.style.height = "inherit";
    female2.style.width = "inherit";
    female2.style.borderRadius = "inherit";
    
    
    const female3 = document.createElement("img");
    female3.src = "Assets/avatars/females/female3.png";
    female3.style.height = "inherit";
    female3.style.width = "inherit";
    female3.style.borderRadius = "inherit";
    
    const female4 = document.createElement("img");
    female4.src = "Assets/avatars/females/female4.png";
    female4.style.height = "inherit";
    female4.style.width = "inherit";
    female4.style.borderRadius = "inherit";
 
 
 const female5 = document.createElement("img");
female5.src = "Assets/avatars/females/female5.png";
female5.style.height = "inherit";
female5.style.width = "inherit";
female5.style.borderRadius = "inherit";

const female6 = document.createElement("img");
female6.src = "Assets/avatars/females/female6.png";
female6.style.height = "inherit";
female6.style.width = "inherit";
female6.style.borderRadius = "inherit";

const female7 = document.createElement("img");
female7.src = "Assets/avatars/females/female7.png";
female7.style.height = "inherit";
female7.style.width = "inherit";
female7.style.borderRadius = "inherit";

const female8 = document.createElement("img");
female8.src = "Assets/avatars/females/female8.png";
female8.style.height = "inherit";
female8.style.width = "inherit";
female8.style.borderRadius = "inherit";

const female9 = document.createElement("img");
female9.src = "Assets/avatars/females/female9.png";
female9.style.height = "inherit";
female9.style.width = "inherit";
female9.style.borderRadius = "inherit";

const female10 = document.createElement("img");
female10.src = "Assets/avatars/females/female10.png";
female10.style.height = "inherit";
female10.style.width = "inherit";
female10.style.borderRadius = "inherit";

const female11 = document.createElement("img");
female11.src = "Assets/avatars/females/female11.png";
female11.style.height = "inherit";
female11.style.width = "inherit";
female11.style.borderRadius = "inherit";

const female12 = document.createElement("img");
female12.src = "Assets/avatars/females/female12.png";
female12.style.height = "inherit";
female12.style.width = "inherit";
female12.style.borderRadius = "inherit";

const female13 = document.createElement("img");
female13.src = "Assets/avatars/females/female13.png";
female13.style.height = "inherit";
female13.style.width = "inherit";
female13.style.borderRadius = "inherit";

const female14 = document.createElement("img");
female14.src = "Assets/avatars/females/female14.png";
female14.style.height = "inherit";
female14.style.width = "inherit";
female14.style.borderRadius = "inherit";

const female15 = document.createElement("img");
female15.src = "Assets/avatars/females/female15.png";
female15.style.height = "inherit";
female15.style.width = "inherit";
female15.style.borderRadius = "inherit";

const female16 = document.createElement("img");
female16.src = "Assets/avatars/females/female16.png";
female16.style.height = "inherit";
female16.style.width = "inherit";
female16.style.borderRadius = "inherit";

const female17 = document.createElement("img");
female17.src = "Assets/avatars/females/female17.png";
female17.style.height = "inherit";
female17.style.width = "inherit";
female17.style.borderRadius = "inherit";


    /* storing image url in arrays */
    
    const avatarOptions = [male1, male2, male3, male4, male5, female1, female2, female3, female4, female5,female6, female7, female8, male14, female9, male10, female10, male8, female11, male12, female12, female13, male11, female14,male6, female15, female16, female17, male7];
    /*
    const avatarOptions = ['👨', '🤡', '👻', '👦', '👧'];
    */
    
    const genderOptions = [
  { icon: '<svg xmlns="http://www.w3.org/2000/svg" width="54" height="54" viewBox="0 0 64 64"><title>Boy SVG Icon</title><path fill="#ffff" d="M58.818 32.032c.158-1.643.279-3.764.279-6.426C59.098 17.092 54.258 2 32 2S4.902 17.092 4.902 25.606c0 2.662.121 4.783.277 6.426C3.084 33.03 2 35.31 2 37.566c0 1.622.529 3.146 1.488 4.288c.914 1.09 2.143 1.756 3.588 1.953C7.791 55.534 22.059 62 32 62c9.939 0 24.209-6.466 24.922-18.192c1.447-.197 2.676-.863 3.59-1.952c.961-1.144 1.488-2.668 1.488-4.29c0-2.256-1.084-4.536-3.182-5.534m.223 8.545c-.729.868-1.785 1.326-3.059 1.326h-.969v.983c0 10.623-13.404 17.146-23.014 17.146c-9.611 0-23.016-6.522-23.016-17.146v-.983h-.965c-1.271 0-2.33-.458-3.057-1.326c-.652-.774-1.025-1.873-1.025-3.011c0-2.036 1.137-4.091 3.676-4.091h.764l.178-.756c.031-.135.779-3.383 1.188-10.241c.121-2.048 1.023-2.774 3.441-2.774c1.697 0 3.906.39 6.463.841c3.465.613 7.782 1.375 12.354 1.375c4.574 0 8.891-.762 12.357-1.374c2.555-.452 4.764-.841 6.461-.841c2.418 0 3.318.726 3.441 2.774c.41 6.856 1.154 10.105 1.188 10.239l.176.758h.766c2.539 0 3.676 2.055 3.676 4.091c-.001 1.137-.374 2.236-1.024 3.01"/><path fill="#ffff" d="M44.498 30c-2.764 0-4.998 2.237-4.998 5s2.234 5 4.998 5a5 5 0 1 0 0-10"/><circle cx="19.5" cy="35" r="5" fill="#ffff"/><path fill="#ffff" d="M40.09 47.627c-5.215 3.6-10.998 3.578-16.18 0c-.623-.432-1.186.314-.764 1.006C24.725 51.205 27.914 53.5 32 53.5c4.084 0 7.275-2.295 8.852-4.867c.425-.692-.137-1.438-.762-1.006"/></svg>', label:' Male' },
  { icon: '<svg xmlns="http://www.w3.org/2000/svg" width="54" height="54" viewBox="0 0 64 64"><title>Girl SVG Icon</title><path fill="#ffff" d="M62 37.504c0-1.877-.893-3.766-2.613-4.768c.391-1.949.678-4.204.678-6.734C60.064 15.001 52.205 2 32 2C11.793 2 3.936 15.001 3.936 26.002c0 2.529.287 4.783.678 6.732C2.891 33.736 2 35.627 2 37.504c0 2.102 1.125 4.211 3.277 5.078c-2.347 4.422-3.338 10.773-.886 15.254c1.061 1.939 10.699 8.119 13.9.342c3.66 1.736 8.209 2.828 13.709 2.828s10.047-1.092 13.707-2.828c3.203 7.777 12.84 1.598 13.902-.342c2.449-4.48 1.459-10.83-.889-15.254c2.153-.867 3.28-2.975 3.28-5.078M32.01 6c14.799 0 24.668 8.001 24.668 18.002c0 0-2.961-15.001-24.668-15.001S6.354 24.002 6.354 24.002C6.354 14.001 17.209 6 32.01 6m23.541 35.004v1c0 7.061-7.307 17.002-23.551 17.002c-16.246 0-23.553-9.941-23.553-17.002v-1H7.48c-2.449 0-3.545-1.758-3.545-3.5s1.096-3.5 3.545-3.5h.184l.172-.07c.092-.037 8.426-3.567 8.336-13.917c9.475 9.174 34.137 10.723 39.379 10.952v3.036h.969c2.447 0 3.545 1.758 3.545 3.5s-1.098 3.5-3.545 3.5h-.969z"/><circle cx="44.5" cy="36.504" r="5" fill="#ffff"/><circle cx="19.5" cy="36.504" r="5" fill="#ffff"/><path fill="#ffff" d="M40.09 48.131c-5.215 3.6-11 3.578-16.182 0c-.621-.432-1.184.314-.762 1.006c1.576 2.572 4.768 4.867 8.852 4.867c4.086 0 7.277-2.295 8.854-4.867c.425-.692-.137-1.438-.762-1.006"/></svg>', label: 'Female' }
];


    const roleOptions = [
      { icon: '<svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 24 24"><title>World-o SVG Icon</title><path fill="#ffff" d="M24 12v-.006c0-3.551-1.546-6.74-4.001-8.933l-.012-.01a.596.596 0 0 0-.101-.087l-.002-.001A11.917 11.917 0 0 0 11.998.001c-3.032 0-5.8 1.126-7.91 2.984l.013-.011a.481.481 0 0 0-.07.065v.001A11.959 11.959 0 0 0 0 12.003c0 3.55 1.544 6.739 3.997 8.933l.012.01a.672.672 0 0 0 .106.097l.002.001a11.92 11.92 0 0 0 7.881 2.958a11.93 11.93 0 0 0 7.911-2.984l-.013.011a11.94 11.94 0 0 0 4.106-9.021v-.007zm-4.462 7.805a11.935 11.935 0 0 0-1.909-1.262l-.065-.032c.613-1.767.982-3.804 1.017-5.923v-.016h4.261a10.824 10.824 0 0 1-3.301 7.23zM12.572 18.3c1.283.069 2.482.351 3.588.81l-.072-.026c-.886 2.02-2.133 3.408-3.516 3.713zm0-1.144v-4.584h4.868a18.593 18.593 0 0 1-.976 5.578l.039-.131a11.637 11.637 0 0 0-3.903-.862l-.027-.001zm0-5.728V6.844a11.91 11.91 0 0 0 4.007-.891l-.079.029c.555 1.619.896 3.485.94 5.425v.021zm0-5.728V1.205c1.383.305 2.63 1.687 3.516 3.713c-1.034.43-2.233.711-3.487.781zm2.854-4a10.841 10.841 0 0 1 3.258 1.752l-.023-.018c-.443.348-.94.676-1.464.961l-.056.028a10.07 10.07 0 0 0-1.724-2.737l.009.011zm-4-.492V5.7a10.804 10.804 0 0 1-3.588-.81l.072.026c.89-2.02 2.135-3.407 3.518-3.712zM6.858 4.42a10.943 10.943 0 0 1-1.544-1.007l.024.018a10.744 10.744 0 0 1 3.158-1.712l.076-.023a10.02 10.02 0 0 0-1.689 2.658zm4.57 2.423v4.584H6.56c.044-1.961.385-3.827.979-5.577l-.039.131a11.65 11.65 0 0 0 3.901.861zm0 5.728v4.584a11.91 11.91 0 0 0-4.007.891l.079-.029c-.555-1.618-.896-3.485-.94-5.425v-.021zm0 5.728v4.495c-1.383-.305-2.63-1.687-3.516-3.713c1.034-.43 2.233-.71 3.487-.78zm-2.85 4a10.845 10.845 0 0 1-3.258-1.748l.024.018c.443-.348.94-.676 1.464-.961l.056-.028a9.843 9.843 0 0 0 1.723 2.733l-.009-.01zm8.564-2.72c.58.315 1.077.642 1.544 1.007l-.024-.018a10.744 10.744 0 0 1-3.158 1.712l-.076.023a10.014 10.014 0 0 0 1.689-2.657l.025-.065zm5.7-8.151h-4.261a19.663 19.663 0 0 0-1.058-6.078l.041.138a12.383 12.383 0 0 0 1.997-1.312l-.024.018a10.813 10.813 0 0 1 3.303 7.205zM4.462 4.195c.576.468 1.223.897 1.909 1.262l.065.032c-.613 1.767-.982 3.804-1.017 5.923v.016H1.157a10.824 10.824 0 0 1 3.301-7.23zm-3.304 8.377h4.261a19.663 19.663 0 0 0 1.058 6.078l-.041-.138c-.751.399-1.397.828-1.997 1.312l.024-.018a10.813 10.813 0 0 1-3.303-7.205l-.001-.028z"/></svg>', label: ' Web Dev' },
      { icon: '<svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 24 24"><title>Mobile-device SVG Icon</title><g fill="none" stroke="#ffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><rect width="12" height="20" x="6" y="2" rx="2"/><path d="M11.95 18h.1"/></g></svg>', label: 'App Dev' },
      { icon: '<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 512 512"><title>Screwdriver-wrench SVG Icon</title><path fill="#ffff" d="M78.6 5c-9.5-7.4-23-6.5-31.6 2L7 47c-8.5 8.5-9.4 22-2.1 31.6l80 104c4.5 5.9 11.6 9.4 19 9.4H158l109 109c-14.7 29-10 65.4 14.3 89.6l112 112c12.5 12.5 32.8 12.5 45.3 0l64-64c12.5-12.5 12.5-32.8 0-45.3l-112-112c-24.2-24.2-60.6-29-89.6-14.3L192 158v-54c0-7.5-3.5-14.5-9.4-19zM19.9 396.1C7.2 408.8 0 426.1 0 444.1C0 481.6 30.4 512 67.9 512c18 0 35.3-7.2 48-19.9l117.8-117.8c-7.8-20.9-9-43.6-3.6-65.1l-61.7-61.7zM512 144c0-10.5-1.1-20.7-3.2-30.5c-2.4-11.2-16.1-14.1-24.2-6l-63.9 63.9c-3 3-7.1 4.7-11.3 4.7H352c-8.8 0-16-7.2-16-16v-57.5c0-4.2 1.7-8.3 4.7-11.3l63.9-63.9c8.1-8.1 5.2-21.8-6-24.2C388.7 1.1 378.5 0 368 0c-79.5 0-144 64.5-144 144v.8l85.3 85.3c36-9.1 75.8.5 104 28.7l15.7 15.7c49-23 83-72.8 83-130.5M56 432a24 24 0 1 1 48 0a24 24 0 1 1-48 0"/></svg>', label: 'Modder' },
      { icon: '<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24"><title>Bot SVG Icon</title><path fill="#ffff" d="M21 10.975V8a2 2 0 0 0-2-2h-6V4.688c.305-.274.5-.668.5-1.11a1.5 1.5 0 0 0-3 0c0 .442.195.836.5 1.11V6H5a2 2 0 0 0-2 2v2.998l-.072.005A.999.999 0 0 0 2 12v2a1 1 0 0 0 1 1v5a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a1 1 0 0 0 1-1v-1.938a1.004 1.004 0 0 0-.072-.455c-.202-.488-.635-.605-.928-.632M7 12c0-1.104.672-2 1.5-2s1.5.896 1.5 2s-.672 2-1.5 2S7 13.104 7 12m8.998 6c-1.001-.003-7.997 0-7.998 0v-2s7.001-.002 8.002 0zm-.498-4c-.828 0-1.5-.896-1.5-2s.672-2 1.5-2s1.5.896 1.5 2s-.672 2-1.5 2"/></svg>', label: 'Bot Dev' },
      { icon: '<svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 24 24"><title>Hackaday SVG Icon</title><path fill="#fffd" d="M0 4.124q0-.305.06-.595l1.956 1.734l2.144-2.38L2.246 1.18c.259-.072.53-.114.812-.114a3.06 3.06 0 0 1 3.058 3.037v.021q0 .23-.033.45l2.385 2.112a6.7 6.7 0 0 0-2.013 2.54L3.982 7.037a3 3 0 0 1-.924.145A3.06 3.06 0 0 1 0 4.124m20.942 12.694q-.46.002-.88.129l-2.308-2.044a6.86 6.86 0 0 1-1.819 2.706l1.993 1.765a3 3 0 0 0-.044.502a3.06 3.06 0 0 0 3.935 2.929l-1.992-1.77l2.14-2.365l1.981 1.76q.051-.27.052-.554v-.026a3.057 3.057 0 0 0-3.058-3.032m-3.397-7.592l2.473-2.189c.292.093.601.145.924.145A3.06 3.06 0 0 0 23.94 3.53l-1.956 1.734l-2.144-2.38l1.914-1.703a3 3 0 0 0-.812-.114a3.06 3.06 0 0 0-3.058 3.037v.021q0 .23.033.45l-2.385 2.112a6.7 6.7 0 0 1 2.013 2.54zm-11.3 5.677l-2.307 2.044A3.057 3.057 0 0 0 0 19.85v.026q0 .284.052.554l1.982-1.76l2.14 2.365l-1.993 1.77a3.06 3.06 0 0 0 3.935-2.929a3 3 0 0 0-.044-.502l1.993-1.765a6.86 6.86 0 0 1-1.82-2.706m8.971 2.657a1.076 1.076 0 1 1-1.961.424h-.192a1.076 1.076 0 1 1-2.127 0h-.15A1.105 1.105 0 0 1 9.7 19.23c-.604 0-1.094-.5-1.094-1.115c0-.21.057-.405.156-.572c-1.493-1.142-2.474-3.051-2.474-5.213c0-3.497 2.559-6.332 5.713-6.332s5.713 2.835 5.713 6.332c0 2.173-.991 4.091-2.497 5.231zm-4.194-5.914a2 2 0 0 0-.559-.66a1.8 1.8 0 0 0-.918-.264a1.5 1.5 0 0 0-.319.036c-.405.05-.747.327-.983.647c-.207.257-.368.569-.372.905c-.032.278.024.556.075.828c.066.322.293.584.55.774c.119.095.29.226.44.116c.1-.134.016-.33.107-.478a.5.5 0 0 1 .258-.326c.263-.132.527-.262.808-.355c.228-.067.416-.219.61-.349c.255-.197.424-.558.303-.874m.996 2.325c-.279-.007-.63 1.237-.574 1.78c.175.72.237-.505.574-.506c.323.014.275 1.255.53.504c.078-.5-.224-1.77-.53-1.778m4.036-.833c.051-.272.107-.55.075-.828c-.004-.336-.165-.648-.372-.905c-.236-.32-.578-.596-.983-.647a1.5 1.5 0 0 0-.319-.036c-.32-.001-.644.1-.918.264c-.235.171-.42.406-.559.66c-.121.316.048.677.303.874c.194.13.382.282.61.35c.28.092.545.222.808.354a.5.5 0 0 1 .258.326c.091.147.007.344.106.478c.151.11.322-.021.44-.116c.258-.19.485-.452.551-.774"/></svg>',  label: 'CyberSec Analyst' }
    ];
    
    
    let step = 0;
    const aiQuestion = document.getElementById('ai-question');
    const inputFrame = document.getElementById('input-frame');
    const imageSelection = document.getElementById('imageSelection');
    const userInput = document.getElementById('userInput');
    const submitBtn = document.getElementById('submitBtn');
    const profileCard = document.getElementById('profileCard');
    const profileImage = document.getElementById('profileImage');
    const profileNickname = document.getElementById('profileNickname');
    const profileEmail = document.getElementById('profileEmail');
    const profilePassword = document.getElementById('profilePassword');
    const profileRole = document.getElementById('profileRole');
    
    let userData = {
      nickname: '',
      email: '',
      password: '',
      gender: '',
      role: '',
      avatar: ''
    };

    function typeWriter(text, i = 0, cb) {
      aiQuestion.innerHTML = '';
      let interval = setInterval(() => {
        aiQuestion.innerHTML += text.charAt(i);
        i++;
        if (i >= text.length) {
          clearInterval(interval);
          if (cb) cb();
        }
      }, 40);
    }

    function typeWriterProfile(element, text, callback) {
      element.textContent = '';
      let i = 0;
      const interval = setInterval(() => {
        element.textContent += text.charAt(i);
        i++;
        if (i >= text.length) {
          clearInterval(interval);
          if (callback) callback();
        }
      }, 50);
    }

 function updateProfileCard() {
  if (userData.nickname && !profileCard.classList.contains('visible')) {
    profileCard.classList.add('visible');
  }
  
  if (userData.nickname) {
    typeWriterProfile(profileNickname, userData.nickname);
  }
  
  if (userData.email) {
    typeWriterProfile(profileEmail, userData.email);
  }
  
  if (userData.password) {
    typeWriterProfile(profilePassword, '••••••••');
  }
  if (userData.gender) {
  typeWriterProfile(profileGender, userData.gender);
}
  
  if (userData.role) {
    typeWriterProfile(profileRole, userData.role);
  }
  
  if (userData.avatar) {
    profileImage.innerHTML = ''; // clear old avatar
    
    if (typeof userData.avatar === 'string') {
      // ✅ if it's text (emoji)
      profileImage.textContent = userData.avatar;
    } else if (userData.avatar instanceof HTMLElement) {
      // ✅ if it's an image element
      const clone = userData.avatar.cloneNode(true);
      clone.style.height = 'inherit';
      clone.style.width = 'inherit';
      clone.style.borderRadius = 'inherit';
      profileImage.appendChild(clone);
    }
  }
}


function showGenderSelection() {
imageSelection.innerHTML = '';
genderOptions.forEach(gender => {
const option = document.createElement('div');
option.className = 'image-option';
option.innerHTML = `<div style="font-size: 2rem;">${gender.icon}</div>
                    <div style="font-size: 0.6rem; margin-top: 4px; color: #00ff7f;">${gender.label}</div>`;
option.onclick = () => {
  document.querySelectorAll('.image-option').forEach(opt => opt.classList.remove('selected'));
  option.classList.add('selected');
  userData.gender = gender.label; // ✅ save gender
  updateProfileCard();

  setTimeout(() => {
    step++;
    askQuestion();
  }, 600);
};
imageSelection.appendChild(option);
});

imageSelection.style.display = 'grid';
imageSelection.style.opacity = 0;
imageSelection.style.transform = 'translateY(30px)';
setTimeout(() => {
imageSelection.style.transition = 'all 0.3s cubic-bezier(.4,0,.2,1)';
imageSelection.style.opacity = 1;
imageSelection.style.transform = 'translateY(0)';
}, 100);
}

/* role function */


function showRoleSelection() {
  imageSelection.innerHTML = '';
  roleOptions.forEach(role => {
    const option = document.createElement('div');
    option.className = 'image-option';
    option.innerHTML = `<div style="font-size: 2rem;">${role.icon}</div><div style="font-size: 0.6rem; margin-top: 4px; color: #00ff7f;">${role.label}</div>`;
    option.onclick = () => {
      document.querySelectorAll('.image-option').forEach(opt => opt.classList.remove('selected'));
      option.classList.add('selected');
      userData.role = role.label;
      updateProfileCard();
      
      setTimeout(() => {
        step++;
        askQuestion();
      }, 600);
    };
    imageSelection.appendChild(option);
  });
  
  imageSelection.style.display = 'grid';
  imageSelection.style.opacity = 0;
  imageSelection.style.transform = 'translateY(30px)';
  setTimeout(() => {
    imageSelection.style.transition = 'all 0.3s cubic-bezier(.4,0,.2,1)';
    imageSelection.style.opacity = 1;
    imageSelection.style.transform = 'translateY(0)';
  }, 100);
}

function showImageSelection() {
  imageSelection.innerHTML = '';
  avatarOptions.forEach(avatar => {
    const option = document.createElement('div');
    option.className = 'image-option';
    
    // Add the avatar image to the option
    option.appendChild(avatar.cloneNode(true));
    
    option.onclick = async () => {
      document.querySelectorAll('.image-option').forEach(opt => opt.classList.remove('selected'));
      option.classList.add('selected');
      
      // ✅ Store the image PATH for database, and the element
      userData.avatar = avatar.cloneNode(true);
      userData.avatarPath = avatar.src;
      console.log('Final user data:', userData);
      updateProfileCard();
      
      setTimeout(async () => {
        imageSelection.style.display = 'none';
        inputFrame.style.display = 'none';
        
        // ✅ Create Firebase account
        typeWriter(`Welcome, ${userData.nickname}! Creating your account...`, 0, async () => {
         
          try {
           
            
            // Create user account
            const userCredential = await createUserWithEmailAndPassword(auth, userData.email, userData.password);
            const user = userCredential.user;
            
            console.log('✅ User authenticated:', user.uid);
            let tokens = 2000; // Initial tokens
            // Save user data to database
            await set(ref(db, `users/${user.uid}`), {
              nickname: userData.nickname,
              email: userData.email,
              gender: userData.gender,
              role: userData.role,
              avatar: userData.avatarPath,
              createdAt: new Date().toISOString(),
              tokens: tokens
            });
            
            console.log('✅ User data saved to database!');
            
            setTimeout(() => {
              typeWriter('Account created successfully! Redirecting...', 0, () => {
                setTimeout(() => {
                  // ✅ Redirect to your dashboard or home page
                  window.location.href = 'homepage.html'; // Change this to your actual page
                }, 1500);
              });
            }, 1000);
            
          } catch (error) {
            console.error('❌ Signup error:', error);
            let errorMsg = 'An error occurred. Please try again.';
            
            // User-friendly error messages
            if (error.code === 'auth/email-already-in-use') {
              errorMsg = 'This email is already registered. Please use a different email.';
            } else if (error.code === 'auth/invalid-email') {
              errorMsg = 'Invalid email address. Please check and try again.';
            } else if (error.code === 'auth/weak-password') {
              errorMsg = 'Password is too weak. Please use a stronger password.';
            }
            
            typeWriter(`Error: ${errorMsg}`, 0, () => {
              setTimeout(() => {
                location.reload(); // Reload to start over
              }, 3000);
            });
          }
        });
      }, 600);
    };
    imageSelection.appendChild(option);
  });
  
  imageSelection.style.display = 'grid';
  imageSelection.style.opacity = 0;
  imageSelection.style.transform = 'translateY(30px)';
  setTimeout(() => {
    imageSelection.style.transition = 'all 0.3s cubic-bezier(.4,0,.2,1)';
    imageSelection.style.opacity = 1;
    imageSelection.style.transform = 'translateY(0)';
  }, 100);
}





function askQuestion() {
inputFrame.style.display = 'none';
imageSelection.style.display = 'none';
userInput.value = '';

if (step === 0) {
typeWriter(questions[step], 0, () => {
  setTimeout(() => {
    step++;
    askQuestion();
  }, 1200);
});

} else if (step === 4) {
// 👇 New gender selection step
typeWriter(questions[step], 0, () => {
  setTimeout(() => {
    showGenderSelection();
  }, 400);
});

} else if (step === 5) {
// 👇 Role selection step
typeWriter(questions[step], 0, () => {
  setTimeout(() => {
    showRoleSelection();
  }, 400);
});

} else if (step === 6) {
// 👇 Avatar selection step
typeWriter(questions[step], 0, () => {
  setTimeout(() => {
    showImageSelection();
  }, 400);
});

} else {
  typeWriter(questions[step], 0, () => {
    setTimeout(() => {
      // Set input type for password field
      if (step === 3) {
        userInput.type = 'password';
      } else {
        userInput.type = 'text';
      }
      
      inputFrame.style.display = 'flex';
      inputFrame.style.opacity = 0;
      inputFrame.style.transform = 'translateY(30px)';
      setTimeout(() => {
        inputFrame.style.opacity = 1;
        inputFrame.style.transform = 'translateY(0)';
        userInput.focus();
      }, 100);
    }, 400);
  });
  }
}



submitBtn.onclick = () => {
  if (userInput.value.trim()) {
    const value = userInput.value.trim();
    
    if (step === 1) {
      userData.nickname = value;
      console.log('Nickname:', userData.nickname);
    } else if (step === 2) {
      // Email validation
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(value)) {
        typeWriter('Please enter a valid email address.', 0, () => {
          setTimeout(() => {
            askQuestion();
          }, 1500);
        });
        return;
      }
      userData.email = value;
      console.log('Email:', userData.email);
    } else if (step === 3) {
      // Password validation
      if (value.length < 6) {
        typeWriter('Password must be at least 6 characters long.', 0, () => {
          setTimeout(() => {
            askQuestion();
          }, 1500);
        });
        return;
      }
      userInput.type = "password";
      userData.password = value;
      console.log('Password set (length):', userData.password.length);
    }
    
    updateProfileCard();
    step++;
    
    if (step < questions.length) {
      askQuestion();
    }
  }
};

userInput.addEventListener('keydown', e => {
  if (e.key === 'Enter') submitBtn.click();
});

askQuestion();


/* my js codes */
const ai_logo = document.getElementById("ai_logo");
const chatbot = document.createElement("img");
chatbot.src = "Assets/avatars/ai/ai1.png";

chatbot.style.height = "inherit";
chatbot.style.width = "inherit";
chatbot.style.borderRadius = "inherit";
ai_logo.innerHTML = "";
ai_logo.appendChild(chatbot)
  </script>
</body>
</html>
